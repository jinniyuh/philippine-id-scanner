<!DOCTYPE html>
<html>
<head>
    <title>Test All Bago City Variations</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .result { padding: 15px; margin: 10px 0; border-radius: 5px; }
        .success { background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background-color: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .debug { background-color: #f8f9fa; color: #495057; border: 1px solid #dee2e6; }
        .info { background-color: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
    </style>
</head>
<body>
    <h1>üß™ Test All Bago City OCR Variations</h1>
    
    <div class="info">
        <strong>Testing all possible OCR variations found in your console logs:</strong>
    </div>
    
    <button onclick="testAllVariations()">Test All Variations</button>
    
    <div id="results" class="debug">
        Click the button to test all variations
    </div>

    <script>
        function testAllVariations() {
            console.clear();
            console.log('=== TESTING ALL BAGO CITY VARIATIONS ===');
            
            // Test cases based on your console logs
            const testCases = [
                {
                    name: "CANDELARIO - LAG ASAN",
                    ocrText: "CANDELARIO, PAUL JOSHUA, MACAHILAS BLK 21 LOT 16 MARINA BAY SUBD LAG ASAN CITY OF H L BAGO NEGROS OCCIDENTAL PHILIPPINES 6101",
                    expected: true
                },
                {
                    name: "BACONG MONTILLA - PUROK PINETREE",
                    ocrText: "PUROK PINETREE BACONG MONTILLA CITY OF BAGO NEGROS OCCIDENTAL PHILIPPINES 6101",
                    expected: true
                },
                {
                    name: "BALINGASAG - BAGO CITY COLLEGE",
                    ocrText: "RAFAEL SALAS DRIVE BALINGASAG BAGO CITY NEGROS OCCIDENTAL",
                    expected: true
                },
                {
                    name: "DULAO - PUROK STA RITA",
                    ocrText: "PUROK STA RITA DULAD CHFY 0FBAGO NEGROS OCCIDENTAL",
                    expected: true
                },
                {
                    name: "PULUPANDAN RESIDENT (Should REJECT)",
                    ocrText: "BARANGAY TAPONG PLIL UPANDAN NEGROS OCCIDENTAL",
                    expected: false
                },
                {
                    name: "MANILA RESIDENT (Should REJECT)",
                    ocrText: "BARANGAY 526 20NE 2 SAMPALOK MANILA CITY METRO MANILA",
                    expected: false
                }
            ];
            
            let results = [];
            
            testCases.forEach((testCase, index) => {
                console.log(`\n--- TEST ${index + 1}: ${testCase.name} ---`);
                
                const result = validateBagoResident(testCase.ocrText);
                const success = result === testCase.expected;
                
                console.log(`Expected: ${testCase.expected ? 'ACCEPT' : 'REJECT'}`);
                console.log(`Actual: ${result ? 'ACCEPT' : 'REJECT'}`);
                console.log(`Status: ${success ? '‚úÖ PASS' : '‚ùå FAIL'}`);
                
                results.push({
                    name: testCase.name,
                    expected: testCase.expected ? 'ACCEPT' : 'REJECT',
                    actual: result ? 'ACCEPT' : 'REJECT',
                    success: success
                });
            });
            
            // Display results
            displayResults(results);
        }
        
        function validateBagoResident(ocrText) {
            // Copy the exact validation logic from login.php
            
            // Step 1: Check for other cities
            const otherCities = [
                'PULUPANDAN', 'TALISAY', 'BACOLOD', 'SILAY', 'VICTORIAS', 'CADIZ', 
                'SAGAY', 'ESCALANTE', 'MANAPLA', 'VALLADOLID', 'MURCIA', 'SALVADOR BENEDICTO',
                'LA CARLOTA', 'LA CASTELLANA', 'MOISES PADILLA', 'ISABELA', 'BINALBAGAN',
                'HIMAMAYLAN', 'KABANKALAN', 'ILOG', 'CAUAYAN', 'CANDONI', 'HINIGARAN',
                'PONTEVEDRA', 'HINOBA AN', 'SIPALAY', 'CALATRAVA', 'TOBOSO', 'SAN CARLOS'
            ];
            
            for (let city of otherCities) {
                if (ocrText.toUpperCase().includes(city.toUpperCase())) {
                    return false; // REJECT immediately
                }
            }
            
            // Step 2: Check for Bago City indicators
            const bagoIndicators = [
                'BAGO CITY',
                'CITY OF BAGO',
                'CITY OF H L BAGO',
                'CITY OF H.L BAGO',
                'CITY OF HL BAGO',
                'CITY OF H.L. BAGO',
                'CITY OF H L. BAGO',
                'CHFY 0FBAGO',
                'CHFY OF BAGO'
            ];
            
            let foundBagoIndicator = false;
            for (let indicator of bagoIndicators) {
                if (ocrText.toUpperCase().includes(indicator.toUpperCase())) {
                    foundBagoIndicator = true;
                    break;
                }
            }
            
            if (!foundBagoIndicator) {
                return false;
            }
            
            // Step 3: Check for barangays
            const bagoBarangays = [
                'Abuanan', 'Alianza', 'Atipuluan', 'Bagroy', 'Balingasag',
                'Binubuhan', 'Busay', 'Calumangan', 'Caridad', 'Dulao',
                'Ilijan', 'Ma-ao', 'Mailum', 'Malingin', 'Napoles', 'Pacol',
                'Poblacion', 'Sagasa', 'Sampinit', 'Tabunan', 'Taloc',
                'Bacong-Montilla', 'Bacong Montilla', 'BACONG MONTILLA', 'BACONG-MONTILLA',
                'Don Jorge L. Araneta', 'DON JORGE L. ARANETA', 'DON JORGE', 'JORGE ARANETA',
                'Lag-Asan', 'LAG ASAN', 'LAG-ASAN', 'Lag Asan',
                'PUROK PINETREE', 'PUROK STA. RITA', 'PUROK STA RITA'
            ];
            
            for (let barangay of bagoBarangays) {
                if (ocrText.toUpperCase().includes(barangay.toUpperCase())) {
                    return true;
                }
            }
            
            return false;
        }
        
        function displayResults(results) {
            const resultsDiv = document.getElementById('results');
            
            let html = '<h3>Test Results:</h3>';
            
            results.forEach((result, index) => {
                const statusClass = result.success ? 'success' : 'error';
                const statusIcon = result.success ? '‚úÖ' : '‚ùå';
                
                html += `
                    <div class="result ${statusClass}">
                        <strong>${statusIcon} ${result.name}</strong><br>
                        Expected: ${result.expected}<br>
                        Actual: ${result.actual}<br>
                        Status: ${result.success ? 'PASS' : 'FAIL'}
                    </div>
                `;
            });
            
            const totalPassed = results.filter(r => r.success).length;
            const totalTests = results.length;
            
            html += `
                <div class="result ${totalPassed === totalTests ? 'success' : 'error'}">
                    <strong>Overall Result: ${totalPassed}/${totalTests} tests passed</strong><br>
                    ${totalPassed === totalTests ? 'All variations working correctly!' : 'Some variations need fixing!'}
                </div>
            `;
            
            resultsDiv.innerHTML = html;
            
            console.log(`\n=== FINAL RESULTS ===`);
            console.log(`Passed: ${totalPassed}/${totalTests}`);
            console.log(`Status: ${totalPassed === totalTests ? '‚úÖ ALL PASS' : '‚ùå SOME FAIL'}`);
        }
    </script>
</body>
</html>
